# Pitfalls

- Stale state

- Endless loop

```javascript
const [movies, setMovies] = useState({});
useEffect(() => {
  fetch('/movies.json')
    .then(res => res.json)
    .then(data => setMovies(data));
});
```

- calling `useEffect` conditionally

```javascript
function Foo({ bar }) {
  if (bar) {
    React.useEffect(); // <-- that's an error
    // React Hook "React.useEffect" is called conditionally. React Hooks must be
    // called in the exact same order in every component render.
  }
}
```

- Side effects outside `useEffect`

```javascript
const Foo () => {
  let = movies = null
  if (!movies) {
    // fetch('/movies.json') fetch movies
    return null
  }

  return <ul>{movies.map(movie => <li>{movie}</li>)}</ul>
}
```

???

https://github.com/kentcdodds/react-hooks-pitfalls/tree/master/slides

---
